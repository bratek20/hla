// DO NOT EDIT! Autogenerated by HLA tool

package pl.bratek20.hla.directory.fixtures

import pl.bratek20.hla.directory.api.*

fun diffFileName(given: FileName, expected: String, path: String = ""): String {
    if (given.value != expected) { return "${path}value ${given.value} != ${expected}" }
    return ""
}


fun diffDirectoryName(given: DirectoryName, expected: String, path: String = ""): String {
    if (given.value != expected) { return "${path}value ${given.value} != ${expected}" }
    return ""
}


fun diffPath(given: Path, expected: String, path: String = ""): String {
    if (pathGetValue(given) != expected) { return "${path}value ${pathGetValue(given)} != ${expected}" }
    return ""
}


fun diffFileContent(given: FileContent, expected: String, path: String = ""): String {
    if (fileContentGetValue(given) != expected) { return "${path}value ${fileContentGetValue(given)} != ${expected}" }
    return ""
}

data class ExpectedFile(
    var name: String? = null,
    var content: String? = null,
)
fun diffFile(given: File, expectedInit: ExpectedFile.() -> Unit, path: String = ""): String {
    val expected = ExpectedFile().apply(expectedInit)
    val result: MutableList<String> = mutableListOf()

    expected.name?.let {
        if (diffFileName(given.name, it) != "") { result.add(diffFileName(given.name, it, "${path}name.")) }
    }

    expected.content?.let {
        if (diffFileContent(given.content, it) != "") { result.add(diffFileContent(given.content, it, "${path}content.")) }
    }

    return result.joinToString("\n")
}

data class ExpectedDirectory(
    var name: String? = null,
    var files: List<(ExpectedFile.() -> Unit)>? = null,
    var directories: List<(ExpectedDirectory.() -> Unit)>? = null,
)
fun diffDirectory(given: Directory, expectedInit: ExpectedDirectory.() -> Unit, path: String = ""): String {
    val expected = ExpectedDirectory().apply(expectedInit)
    val result: MutableList<String> = mutableListOf()

    expected.name?.let {
        if (diffDirectoryName(given.name, it) != "") { result.add(diffDirectoryName(given.name, it, "${path}name.")) }
    }

    expected.files?.let {
        if (given.files.size != it.size) { result.add("${path}files size ${given.files.size} != ${it.size}") }
        given.files.forEachIndexed { idx, entry -> if (diffFile(entry, it[idx]) != "") { result.add(diffFile(entry, it[idx], "${path}files[${idx}].")) } }
    }

    expected.directories?.let {
        if (given.directories.size != it.size) { result.add("${path}directories size ${given.directories.size} != ${it.size}") }
        given.directories.forEachIndexed { idx, entry -> if (diffDirectory(entry, it[idx]) != "") { result.add(diffDirectory(entry, it[idx], "${path}directories[${idx}].")) } }
    }

    return result.joinToString("\n")
}

data class ExpectedCompareResult(
    var same: Boolean? = null,
    var differences: List<String>? = null,
)
fun diffCompareResult(given: CompareResult, expectedInit: ExpectedCompareResult.() -> Unit, path: String = ""): String {
    val expected = ExpectedCompareResult().apply(expectedInit)
    val result: MutableList<String> = mutableListOf()

    expected.same?.let {
        if (given.same != it) { result.add("${path}same ${given.same} != ${it}") }
    }

    expected.differences?.let {
        if (given.differences.size != it.size) { result.add("${path}differences size ${given.differences.size} != ${it.size}") }
        given.differences.forEachIndexed { idx, entry -> if (entry != it[idx]) { result.add("${path}differences[${idx}] ${entry} != ${it[idx]}") } }
    }

    return result.joinToString("\n")
}